# Оглавление

* Две ценности
    * Поведенческая ценность
    * Структура как часть поведения
* Признаки нарушений
    * Поведение
    * Структура
        * Жесткость
        * Хрупкость
        * Неподвижность
        * Вязкость
        * Избыточная сложность
        * Избыточное дублирование
        * Непрозрачность
* Понятия и Эффекты
    * Понятия
        * Проектирование
        * Рефакторинг
        * Архитектура
    * Эффекты
        * Непротиворечивость
        * Оптимизация процесса труда
    * Следствия
* Роль архитектуры в ПО
    * Эффект оптимизации для разработчика
    * Эффект оптимизации для работодателя

# Введение

Архитектура является неотъемлемой частью процесса разработки ПО.
Окутанная мистикой, она часто представляется чем то темным, недоступным обычному разработчику.

Из-за этого выделяют отдельных специалистов (архитекторов), которые с высоты своей позиции диктуют простым рабочим
догмы - инструкции для решения всех проблем.

Многие авторы пишут книги с красноречивыми названиями,
где приводят свои правила, обещающие сделать любой проект *чистым*, чтобы это не значило.

Различные библиотеки обещают своим пользователям, что именно их решение (в корни отличающееся от конкурентов) обеспечит
проекту волшебные:
расширяемость, поддерживаемость и тестируемость.

Сформулируем следующие вопросы:

* Какие проблемы пытается решить архитектор?
* Существуют ли универсальные способы их решения?
* Какую роль в этом процессе играет обычный специалист?

# Две ценности

Любую программу можно разделить на две составные части:

* Поведение
* Структура

Первое представляет собой то, что формирует потребительскую ценность, то, за что платит заказчик.
Непосредственно это выражается в виде *наблюдаемого* поведения.

Структуру же определить не так просто.
Пока скажем, любая программа обладающая поведением, также содержит в себе и структуру.

Для того чтобы глубже понять оба понятия, попробуем подойти немного с другой стороны.

# Признаки нарушений

## Поведение

Можно сказать следующее, если приложение не решает поставленной на данный
момент бизнес задачи (в полном объеме), то его поведенческая ценность считается нарушенной.

Это может происходить по разным причинам:

* Наличие поведений противоречащих требуемым (дефекты)
* Наличие поведений не до конца удовлетворяющим требованиям (недоработки)

Все они имеют достаточно осязаемый и что самое главное - явный характер, выражающийся в виде отдельных задач в трекере.

В среднем, удовлетворение поведения является относительно не сложной задачей. Многие уже в школе строили программы
решающие, хоть и зачастую тривиальные проблемы.

## Структура

Как и говорилось раннее, структура является неотъемлемой частью любой программы.
Далее предположим что данное понятие (при его нарушении) обладает рядом эффектов, негативно влияющих на процесс развития
поведения ПО.

Совершено ясно что если их игнорировать, не предпринимать попыток по их исправлению,
то будет нарушена основная ценность (она же причина существования программы), а именно - поведение.

Перечислим основные признаки нарушения структуры:

### Жесткость

Программа называется жесткой,
если одно изменение в модуле вызывает за собой каскад изменений в других модулях.

### Хрупкость

Программа называется хрупкой в двух случаях:

* Дефекты легко допустить
* Дефекты легко пропустить

### Неподвижность

Программа называется неподвижной в случае если элементы системы, полезные в других модулях, тяжело переиспользовать.

### Вязкость

Вязкость делится на два вида:

#### Вязкость проекта

Проявляется в случаях когда проще реализовать поведение через противоречащие основному дизайну
средства (костыли), чем следовать установленным правилам.

#### Вязкость окружения

Проекты, в которых инструментарий является помехой для достижения требуемого поведения, называются вязкими.

### Избыточная сложность

Проект называется избыточно сложным, если в нем присутствуют надстройки,
не имеющие практической пользы на данный момент.

### Избыточное дублирование

Дублирование бывает двух видов

#### Ложное дублирование

Если код является идентичным или примерно похожим, это не значит что он является дублирующим.
Дальнейшие правки таких признаков приведут к еще большим проблемам в будущем.

### Непрозрачность

Программа называется непрозрачной если разработчик не может вывести поведенческую ценность исходя из исходного кода
модуля.

# Понятия и эффекты структуры

## Понятия

Вспомним, каким образом проходила работа с указанными признаками:

* Сначала приводилось описание проблемы
* Затем явная идентификация в коде
* И, наконец, применялись подходящие инструменты для их решения

Назовем данный алгоритм процессом *проектирования*.

*Рефакторинг* - это частный случай процесса проектирования, при котором происходит изменение на основе существующей
структуры, а не формирование совершенно новой.

Очевидно, что результатом проектирования является проект,
обладающий признаками, отличными от того что были прежде (иначе в самом проектировании не было бы
смысла).

Результат проектирования, т. е. определенное состояние данных признаков, назовем *архитектурой*.

Подытожим:

* Архитектура - есть определенное состояние признаков структуры (т. е. сама структура)
* Проектирование - есть процесс, изменяющий данные признаки (т. е. структуру)
* Рефакторинг - есть частный случай проектирования

Важно отметить, что проектирование влияет только на структурную ценность приложения. В ином случае, данный процесс
таковым не является.

## Эффекты

### Непротиворечивость

Структура имеет прямое влияние на поведение приложения через такой признак как непротиворечивость.

В основе любого проекта лежит модель. Она обладает некоторыми свойствами и ограничениями.
При правильном подборе, поведения будут прямо следовать из выбранной структуры,
она будет не избыточна и не противоречива.

Но, к сожалению, не редким является случай выбора ошибочной модели, вследствие которой бизнесу приходится отказываться
от частей поведения ввиду наличия явных и не разрешимых конфликтов с архитектурой (структурой) проекта

Такая ситуация ставит под сомнение компетенцию инженеров в глазах у заказчика и негативным образом влияет на ведение
бизнеса в целом.

### Оптимизация процесса труда

Если рассмотреть приведенные ранее семь признаков, то можно обнаружить что все они не являются блокирующими бизнес
явлениями.

Вместо этого, каждый из них, при нарушении будет замедлять процесс разработки за счет его усложнения. Т. е. снижать
производительность труда.

Производительность предлагается измерять в виде среднего количества человеко-часов необходимых на выполнение
задачи среднего уровня сложности по проекту. Чем этот показатель ниже, тем разработка эффективней. Верно и обратное.

Неотъемлемым свойством структуры является постоянное стремление к усложнению,
т. е. к приобретению/усилению указанных признаков. Это зачастую обусловлено человеческим фактором.
Внешне, это проявляется в виде снижения производительности труда с развитием проекта.

### Следствия

Следовательно, можно постановить:

* Задача проектирование заключается в оптимизации труда и непротиворечивости поведению (т. е. снижение
  активности признаков)
* Проектирование в целевом виде - это непрерывный процесс, ввиду свойства структуры к усилению признаков, т. е.
  деградации.

Из чего можно вывести что архитектура является *хорошей*/*правильной*/*подходящей*/*чистой* при выполнении двух условий:

* Непротиворечивость поведению
* Высокая производительность труда

# Сложность проектирования

Из выше приведенных утверждений можно сказать что низкая производительность труда является явным признаком плохой
архитектуры. Такие проекты называются термином legacy project (устаревший/заброшенный проект).

Сам факт того что это является частым результатом в индустрии, говорит о сложности правильного проектирования.
Она прежде всего обуславливается количеством факторов являющимися причинами появления/усиления признаков нарушения
структуры.

Именно от причин, а не от самих признаков зависит конечное решение, применяемое при проектировании.

Перечислим некоторые из них:

* Компетенция разработки
* Частота показов
* Стабильность требований
* Технологии разработки
* Этап проекта
* Специфика предметной области (вероятные пути развития)

Это только малая часть списка.

Отметим, что несколько разных проектов могут обладать одинаковыми факторами (и как
следствие признаками), это означает что для них подойдут одинаковые решения по проектированию.
Такие рецепты называются *паттернами* (или *принципами* в более широком смысле).

Для их грамотного применения нужно не только знать факторы и признаки закрепленные за определенным паттерном, но и уметь
правильно их идентифицировать на конкретном проекте.

В сухом остатке, правильное проектирование требует:

* Знание признаков и влияющих на них факторов
* Проницательность для своевременного и точного определения проблем на проекте
* Опыт для подбора подходящего способа их устранения через проектирование
